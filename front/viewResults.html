<html>

<head>
<link rel="stylesheet" type="text/css" href="style.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

  <div class="menu">
    <i type="button" style="float: left" value="Back" class="material-icons md-48" onclick="window.history.back()">arrow_back</i>
    <p style="width:50%; margin-right:60px; margin-top:5px" id="menu_text"> Results </p>
  </div>

  <div class="widePage" id="page">

  </div>

  <script>

  var data = "request=getstudentresults";

  // construct an HTTP request
  var xhr = new XMLHttpRequest();
  url = "https://web.njit.edu/~ybp7/CS490/middle.php";
  xhr.open("post", url, true);
  xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

  // send the collected data as JSON
  xhr.send(data);
  console.log("data sent:");
  console.log(data);

  xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
        console.log("returned data: ");
        console.log(xhr.responseText);
        if(xhr.responseText.length < 100) {
          window.location.href = 'student.html?message=Test_scores_not_released_yet';
          return;
        }
        generatePage(xhr.responseText);
    }
  };

  function generatePage(rawJSON) {

    var page = document.getElementById('page');
    page.innerHTML = rawJSON;
  }



  </script>
</body>
</html>
